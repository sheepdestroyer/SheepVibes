{"id": 6, "timestamp": "2025-10-06T21:35:23.587688", "source": "environment", "message": "Added workspace context", "cause": 4, "observation": "recall", "content": "Added workspace context", "extras": {"recall_type": "workspace_context", "repo_name": "sheepdestroyer/SheepVibes", "repo_directory": "SheepVibes", "repo_branch": "feat/editable-feed-urls", "repo_instructions": "# SheepVibes Repository Rules and Guidelines\n\nThis microagent provides comprehensive knowledge about the SheepVibes RSS/Atom feed aggregator repository, including development workflows, testing requirements, and deployment procedures.\n\n## Core Rules for AI Agents\n\n### Mandatory Workflow Steps\n1. **Read all `.md` files** from the repository before starting any task\n2. **Read both backend & frontend code files** to understand the application's logic\n3. **For each individual step** during a task:\n   - Add new relevant tests to the test suite\n   - Verify pre-existing tests are still valid, correct if necessary\n4. **Execute full CI workflow** as described in `.github/workflows/run-tests.yml`\n5. **Before task completion**:\n   - Run final full validation of all tests\n   - Update relevant `.md` files (especially `TODO.md` and `CHANGELOG.md`)\n\n### Testing Requirements\n- **Backend tests** require a running Redis service container\n- **Dynamic port handling** - Redis port is dynamically mapped in CI environments\n- **Environment variable**: Tests look for `CACHE_REDIS_PORT` to override default Redis port\n- **Full test suite execution** is mandatory before proceeding to next steps\n\n## Application Architecture\n\n### Backend (Python/Flask)\n- **Framework**: Flask with SQLAlchemy ORM\n- **Database**: SQLite with migrations\n- **Caching**: Redis for performance optimization\n- **Background tasks**: APScheduler for automatic feed updates\n- **API**: RESTful endpoints for tabs, feeds, and feed items\n\n### Frontend (Vanilla JavaScript)\n- **No frameworks** - pure JavaScript, HTML, CSS\n- **Real-time updates**: Server-Sent Events (SSE) for live feed updates\n- **UI**: Netvibes/iGoogle-inspired grid layout\n\n## Development Environment Setup\n\n### Production Deployment (Podman Pod with systemd/Quadlet)\n- Use `scripts/deploy_pod.sh` for stable deployment\n- Pod includes: app container, Redis container, persistent volumes\n- Auto-start configured via systemd user services\n\n### Local Development Options\n1. **Podman containers** with development network\n2. **Direct backend/frontend** development with virtual environment\n\n## Key Configuration Variables\n- `DATABASE_PATH`: SQLite database file location\n- `UPDATE_INTERVAL_MINUTES`: Feed update frequency (default: 15)\n- `CACHE_REDIS_URL`: Redis connection URL\n\n## Testing Procedures\n\n### Backend Testing\n1. Start Redis container: `podman run -d --rm --name sheepvibes-test-redis -p 6379:6379 redis:alpine`\n2. Install dependencies: `cd backend && pip install -r requirements.txt -r requirements-dev.txt`\n3. Run tests: `python -m pytest -v`\n\n### CI/CD Reference\n- **Definitive guide**: `.github/workflows/run-tests.yml`\n- **Service containerization**: Redis service with dynamic port mapping\n- **Environment setup**: Set `CACHE_REDIS_PORT` for dynamic environments\n\n## Error Handling and Limitations\n- **Feed parsing**: Handle timeouts, invalid URLs, bad feed formats\n- **Database constraints**: Use entry link as GUID to prevent UNIQUE constraint errors\n\n## Usage Examples\nWhen working on this repository, agents must:\n- Always start by reading all markdown files\n- Follow the step-by-step validation workflow\n- Replicate CI environment setup for testing\n- Update documentation files upon task completion\n\n## Important Notes\n- The repository follows a strict validation-first approach\n- All changes must be tested and validated before proceeding\n- Documentation updates are part of the completion criteria", "runtime_hosts": {"http://localhost:51465": 51465, "http://localhost:59282": 59282}, "additional_agent_instructions": "", "date": "2025-10-06", "custom_secrets_descriptions": {}, "conversation_instructions": "Target file: /sheepvibes-rules.md\n\nDescription: Use the GitHub API with the GITHUB_TOKEN environment variable to retrieve PR details.\n\nTriggers: ", "working_dir": "/workspace", "microagent_knowledge": [{"name": "github", "trigger": "github", "content": "You have access to an environment variable, `GITHUB_TOKEN`, which allows you to interact with\nthe GitHub API.\n\n<IMPORTANT>\nYou can use `curl` with the `GITHUB_TOKEN` to interact with GitHub's API.\nALWAYS use the GitHub API for operations instead of a web browser.\nALWAYS use the `create_pr` tool to open a pull request\n</IMPORTANT>\n\nIf you encounter authentication issues when pushing to GitHub (such as password prompts or permission errors), the old token may have expired. In such case, update the remote URL to include the current token: `git remote set-url origin https://${GITHUB_TOKEN}@github.com/username/repo.git`\n\nHere are some instructions for pushing, but ONLY do this if the user asks you to:\n* NEVER push directly to the `main` or `master` branch\n* Git config (username and email) is pre-set. Do not modify.\n* You may already be on a branch starting with `openhands-workspace`. Create a new branch with a better name before pushing.\n* Use the `create_pr` tool to create a pull request, if you haven't already\n* Once you've created your own branch or a pull request, continue to update it. Do NOT create a new one unless you are explicitly asked to. Update the PR title and description as necessary, but don't change the branch name.\n* Use the main branch as the base branch, unless the user requests otherwise\n* After opening or updating a pull request, send the user a short message with a link to the pull request.\n* Do NOT mark a pull request as ready to review unless the user explicitly says so\n* Do all of the above in as few steps as possible. E.g. you could push changes with one step by running the following bash commands:\n```bash\ngit remote -v && git branch # to find the current org, repo and branch\ngit checkout -b create-widget && git add . && git commit -m \"Create widget\" && git push -u origin create-widget\n```"}, {"name": "gitlab", "trigger": "git", "content": "You have access to an environment variable, `GITLAB_TOKEN`, which allows you to interact with\nthe GitLab API.\n\n<IMPORTANT>\nYou can use `curl` with the `GITLAB_TOKEN` to interact with GitLab's API.\nALWAYS use the GitLab API for operations instead of a web browser.\nALWAYS use the `create_mr` tool to open a merge request\n</IMPORTANT>\n\nIf you encounter authentication issues when pushing to GitLab (such as password prompts or permission errors), the old token may have expired. In such case, update the remote URL to include the current token: `git remote set-url origin https://oauth2:${GITLAB_TOKEN}@gitlab.com/username/repo.git`\n\nHere are some instructions for pushing, but ONLY do this if the user asks you to:\n* NEVER push directly to the `main` or `master` branch\n* Git config (username and email) is pre-set. Do not modify.\n* You may already be on a branch starting with `openhands-workspace`. Create a new branch with a better name before pushing.\n* Use the `create_mr` tool to create a merge request, if you haven't already\n* Once you've created your own branch or a merge request, continue to update it. Do NOT create a new one unless you are explicitly asked to. Update the PR title and description as necessary, but don't change the branch name.\n* Use the main branch as the base branch, unless the user requests otherwise\n* After opening or updating a merge request, send the user a short message with a link to the merge request.\n* Do all of the above in as few steps as possible. E.g. you could push changes with one step by running the following bash commands:\n```bash\ngit remote -v && git branch # to find the current org, repo and branch\ngit checkout -b create-widget && git add . && git commit -m \"Create widget\" && git push -u origin create-widget\n```"}]}}